---
title: "CSR, SSR, SSG란?"
date: "2023-03-07"
category: "Next.js"
imageUrl: /images/nextjs.png
description: "도대체 CSR, SSR, SSG, ISR이 뭐야?"
---

Next.js를 배우게 되면서 제일 많이 보게 된 단어가 CSR, SSR, SSG, ISR이였다. 각각의 뜻과 장단점을 알아봐서 적절한 곳에 잘 사용하도록 하자.

## CSR이란?

- 렌더링 하는 주체자가 클라이언트로 react에서 기본적으로 사용하는 방식이다.
- HTML은 텅텅 비어져있어서 처음에 접속하면 빈 화면만 보인다.
- 다시 링크된 app.js를 서버로부터 다운로드 받는데 여기에는 자바스크립트 뿐만 아니라 어플리케이션을 구동하는 프레임워크와 라이브러리의 소스코드들도 다 포함되어 있어 사이즈가 커서 다운로드 받는데 오래걸린다.
- 추가로 필요한 데이터가 있다면 서버에 요청해서 데이터를 받아온 다음에 이것들을 기반으로 동적으로 HTML을 생성해서 클라이언트에게 보여준다.

### CSR의 장점

- 한번 로딩되면, 빠른 UX 제공를 제공한다.
- 클라이언트에서 렌더링하기 때문에 서버의 부하가 적다.

### CSR의 단점

- 페이지 로딩 시간이 길다.
- 자바스크립트 활성화가 필수이다.
- SEO 최적화가 힘들다.
- 화면을 그리는데 필요한 모든 데이터가 클라이언트 측에 있어서 보안에 취약하다.
- CDN에 캐시가 되지 않는다.

### 언제 사용하는가?

- 페이지에 있긴 하지만 중요하고 의미있는 데이터가 아닌경우
- 나중에 렌더링이 되어도 상관없는 데이터인 경우

### 잘 사용하기 위해서는

- 최종적으로 번들링해서 사용자에게 보내주는 이 자바스크립트 파일을 어떻게 하면 효율적으로 분할해서 첫번째로 사용자가 보기위해 필요한 필수적인 것만 보낼 수 있는지 고민해야 한다.

---

## SSG

- 렌더링 하는 주체자가 서버이다.
- 빌드시 HTML을 생성하는 방식으로, 미리 렌더링 된 HTML이 각각 요청에서 재사용된다.
- 외부에서 데이터가 필요한 경우에는 build time에 데이터를 fetching을 한 다음에 HTML페이지가 생성된다.
- 사용자 요청 전에 페이지를 미리 렌더링 할 수 있을 때 사용
- 12버전에서는 `getStaticProps`를 통해 구현 가능
- 언제 렌더링 되느냐에 따라 SSG, SSR, ISR로 나뉜다.

### 장점

- 페이지 로딩시간이 빠르다.
- 자바스크립트가 필요 없다.
- SEO 최적화가 좋다.
- 보안이 뛰어나다.
- CDN에 캐시가 된다.

### 단점

- 빌드시 페이지가 렌더링된 것을 재사용하기 때문에 데이터가 바뀌는 것을 반영할 수 없다.

### 어떨때 사용하는가?

- 빌드 후 데이터가 바뀌지 않는 페이지를 보여줄때 유용하다.
- ex) 블로그 포스트 보여주기

---

## ISR

- 설정한 주기만큼 주기적으로 렌더링해서 페이지를 다시 생성한다.

### 장점

- SSG의 장점 + 주기적으로 데이터를 바꿀 수 있다.

### 단점

- 여전히 실시간 데이터가 아니다.
- 사용자별 정보 제공이 어렵다.

### 어떨 때 사용하는가?

- 데이터가 주기적으로 바뀌며 바뀐 사항을 클라이언트가 바로 알지 않아도 될때 유용하다.
- ex) 인기있는 포스트 리스트 보여주기

---

## SSR

- 렌더링 하는 주체자가 서버. 클라이언트가 요청시 렌더링된다.
- 각 요청마다 서버에서 HTML 페이지를 만든다.
- 추가 설정없이는 CDN에 캐시되지 않는다.
- 요청마다 서버에서 HTML을 만들어서 주는것
- 데이터가 많이 바뀌거나 요청에 따라 페이지 컨텐츠가 변경되는 경우 사용
- 12버전에서는 `getServerSideProps`를 통해 구현 가능

### 장점

- SSG의 장점 + 실시간 데이터를 사용 + 사용자별 필요한 데이터를 사용한다.

### 단점

- SSG, ISR에 비해 느림
- 사용자가 클릭을 할때마다 서버에서 필요한 데이터를 가지고 와서 HTML을 만들어야하므로 서버에 과부하
- 클릭했는데 반응이 없을 수 있다.
- CDN에 캐시가 안됨

### 잘 사용하기 위해서는

- TTV TTI 시간의 단차를 줄이기 위해 고민해봐야한다.
- 그 간극을 어떻게 사용자에게 잘 알릴 수 있을 지 고민해야 한다.

---

## Hybrid

- 각기 다른 렌더링 방식을 혼합해서 사용한다.
- 한페이지 내에서도 혼합해서 사용할 수 있다.

## Hydration

- Hybrid를 가능하게 한 기술..?
- react로 가득채우다.
- 클라이언트가 서버에 페이지를 요청하면 Next.js는 필요한 것들을 받아와서 정적 HTML 페이지를 만들어서 클라이언트에게 보낸다.
- 이때 아직 자바스크립트 코드가 없기 때문에 interaction을 할 수 없음
- Next.js는 다시 react라이브러리와 JS코드를 보내서 컴포넌트 렌더링을 한다. (하이드레이션)
- 컴포넌트 렌더링을 해서 HTML을 REACT컴포넌트로 대체한다.
- Key Point: 정적인 HTML과 Hydration된 페이지의 간극을 줄여나가는 것

## 사이트를 만들때 주의할 점

- TTV : 사용자가 웹사이트에 접속에서 페이지를 볼때까지의 시간을 줄일 것
- TTI : 사용자가 interaction까지의 시간을 줄여나갈 것. 아니면 아직 사용자에게 명백하게 준비중이라는 걸 알려주기

### 언제 어떤 걸 쓰면 좋을까?

- 사용자의 로그인이 필요? 사용자 별로 달라지는 데이터인가?
- 만약에 데이터가 자주 변경이 되지 않고 사용자가 최신의 데이터를 바로 볼 필요가 없다면 ISR사용
- 데이터가 변경이 될때 사용자가 즉각적으로 바로 봐야한다면? SSR | Hybrid
- 페이지를 ISR이나 SSR로 미리 골격을 만들어두고 주기적으로 바뀌는 부분만 CSR로 구성하기
- 사용자의 로그인이 필요하다면 CSR | SSR | Hybrid
