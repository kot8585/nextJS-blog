---
title: "useEffect 이해하기"
date: "2023-04-03"
category: "React"
description: "버튼을 클릭하면 사이드바를 보여주고 사이드바가 아닌 곳을 클릭했을 시 사이드바를 화면에서 없애기"
imageUrl: "/images/javascript.png"
---

### useEffect는 언제 사용하는가
- 비동기적인 로직을 실행하고 싶을때 



### useEffect
useEffect에서는 side effect로직을 써야한다는데 side effect란 무엇을 말하는 것일까
- Fetching data
- Reading from localStorage
- Registering and deregistering event listener

### useEffect는 모든 렌더 사이클후에 실행되기 때문에 언제 컴포넌트가 렌더링 되고 리렌더링이 되는지 잘 알아야 한다. 
-  컴포넌트는 state, prop, context가 변경되었을때 리렌더된다.
- useEffect는 dependency로 주어진 값이 바뀌었을때 실행된다. 컴포넌트 안의 로직들은 모두 재실행되기 때문에 이것은 useEffect에도 영향을 줄 수 있다. 이때는 useCallback을 사용할 수 있다. 
- 만약 화면에서 없어졌다가 다시 그려졌을때는 렌더링...? disable이랑 visable일때

### useEffect의 return 함수가 호출 되는 경우 
- useEffect가 재실행될때 return 함수가 실행된 다음 useEffect의 callback 함수가 실행된다.
- 컴포넌트가 destroy 되기 전에 실행된다. -> 이게 언제?? 
- useCallback을 사용하면 불필요한 useEffect실행을 막을 수 있다.

## useEffect를 custom hook으로 빼야 하는 이유
- 코드 재사용 가능
- 더 작게 컴포넌트를 만들 수 있다. 
- react component를 테스트 할 필요가 없기 때문에 단위테스트가 가능하다

- useEffect의 dependency array에는 한가지라도 바뀔때마다 재실행되지만, if나 useRef를 통해 제어를 할 수 있고, 심지어 ref는 dependency array에 추가할 필요가 없다(아까는 하라며???????????)

useEffect의 dependency에는 useEffect의 callback함수에서 사용되는 모든 외부값을 적어줘야 한다. 예를 들면 state 변수, props, context 변수들이다. 내가 사용한 useEffect에서는 setIsClicked함수를 사용했기 때문에 의존성으로 추가해주었다. 

useEffect의 dependency에 callback 함수에서 사용되는 외부 값들을 모두 추가해주어야 하는 이유는 React팀은 useEffect함수 내부에서 사용되는 모든 값을 동적으로 취급하기를 원하기 때문이다. 따라서 callback함수에서 사용되는 외부의 값이 변경될 가능성이 거의 없다고 확신하더라도 dependency에 추가해주어야 한다. 