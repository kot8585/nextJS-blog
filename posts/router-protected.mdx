---
title: "React Router - 권한이 없다면 redirect 하기"
date: "2023-02-18"
category: "ReactRouter"
description: "권한 검사할 컴포넌트를 Protected컴포넌트 감싸서 권한이 없다면 Redirect를 해보자"
imageUrl: "/images/react-router.jpeg"
---

### 1\. Protected.jsx 파일 만들기

```
import React from 'react'
import { Navigate } from 'react-router-dom'
function Protected({ user, children }) {
  if (!user) {
    return <Navigate to="/" replace={true} />
  }
  return children
}
export default Protected
```
-   user가 있을 경우(로그인 되어 있을 경우) children을 리턴하고 user가 없을 경우 "/"로 redirect 해준다.
-   replace 인자는 어떤거?
    -   true일 경우 : history stack에 현재의 경로로 대체된다. 따라서 뒤로 가기를 하면 대체된 경로로 이동. 만약 "/cart"에서 redirect되어서 "/home"으로 갔을 경우 뒤로가기를 하면 replace된 "/"로 이동한다.
    -   false일 경우 : 위와 같은 경우 뒤로가기를 하면 "/cart"로 이동한다.
-   useNavigate는 Navigate를 hook으로 만든것이므로 hook을 사용할 수 있는 경우라면 useNavigate를 사용해도 된다.

### 2\. router에서 검사할 컴포넌트를 Protected로 감싸주기
```
{ path: "cart", element: <ProtectedRoute user={user}><Cart /></ProtectedRoute>},
```